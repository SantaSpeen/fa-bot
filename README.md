# fa-bot

Бот для Telegram. Позволяет получать и формировать расписание занятий для группы.

## Установка

### Простой вариант

1. Установите Python 3.10 или выше.
2. Склонируйте репозиторий:
    ```bash
    git clone https://github.com/SantaSpeen/fa-bot.git && cd fa-bot
    ```
3. Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```
4. 1 раз запустите бота:
    ```bash
    python main.py
    ```
5. Введите токен бота, который вы получили у [@BotFather](https://t.me/BotFather) в `config.json`.
6. Перезапустите бота:
    ```bash
    python main.py
    ```
7. Добавьте бота в группу и дайте ему права администратора.
8. Готово!

### Docker

1. Установите Docker.
2. Выполните шаги 2-5 из простого варианта.
3. Убедитесь что всё работает.
4. Соберите образ:
    ```bash
    docker build -t fa-bot .
    ```
5. Запустите контейнер:
    ```bash
    docker run -d \
    --name fa-bot \
    -v $(pwd)/src/config.json:/app/config.json \
    -v $(pwd)/src/storage:/app/storage \
    fa-bot
    ```

## Использование

### Команды

### Общие команды

Доступные команды:
- `/auto` - автоматический поиск и обработка файла
- `/file` - обработка файла из ответа на сообщение
- `/settings` - Настройки чата

Команды для настройки (Для каждого чата настраивается отдельно):
- `/set <команда> [[значение]]`
- `/template <команда> [[значение]]`

Админские команды:
- `/set_save_path` - установить путь для сохранения файлов
- `/reload` - перезагрузить данные (chats, links, templates)

### Команды для настроек чата

Использование: `/set <команда> [значение]`\
Доступные команды:
- `help` - вывести это сообщение
- `url` - установить URL страницы с расписанием
- `find` - установить строку для поиска файла
- `sheet` - установить название листа в файле с расписанием

Пример:
 - `/set find 1 курс ОЗФО`
 - `/set sheet 1к Прикладная математика`

### Команды для шаблонизатора

Использование: `/template <команда> [значение]`\
Доступные команды:
- `help` - Вывести это сообщение
- `list` - Вывести список доступных шаблонов
- `use` - Использовать шаблон из доступных
- `custom` - Загрузить свой шаблон (не реализовано)

Пример:
  - `/template list`
  - `/template use default`

### Пример
![preview](.github/img.png)